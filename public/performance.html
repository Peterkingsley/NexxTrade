<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NexxTrade — Performance Analytics</title>
  <meta name="description" content="View the full performance history of NexxTrade's futures signals." />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html-to-image@1.11.11/dist/html-to-image.min.js"></script>
  <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
  <style>
    :root{
      --bg:#0b0f14;
      --bg-2:#0f141b;
      --text:#e9edf3;
      --muted:#a8b3c7;
      --accent:#2ad678;
      --accent-2:#f0c75e;
      --danger:#ff5d5d;
      --line:#1b2330;
      --shadow:0 8px 24px rgba(0,0,0,.35);
      --radius:16px;
      --radius-lg:20px;
      --max:1200px;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;overflow-x:hidden}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    button{font:inherit}
    .container{width:100%;max-width:var(--max);margin-inline:auto;padding-inline:20px}
    .card{background:var(--bg-2);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow)}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:.6rem;padding:.9rem 1.4rem;border-radius:999px;border:1px solid transparent;cursor:pointer;transition:.2s ease;white-space:nowrap;font-weight:600}
    .btn-primary{background:var(--accent);color:#04140a;}
    .btn-primary:hover{filter:brightness(1.1);transform:translateY(-1px)}
    .btn-ghost{background:transparent;border-color:var(--line);color:var(--text)}
    .btn-ghost:hover{background:#0f151d}
    
    header{position:sticky;top:0;z-index:50;background:linear-gradient(180deg, rgba(11,15,20,.9), rgba(11,15,20,.6));backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:14px 20px;}
    .brand{display:flex;align-items:center;gap:.6rem}
    .logo{width:28px;height:28px;border-radius:7px;background:conic-gradient(from 30deg, #12b886, #2ad678, #8ef7bf);box-shadow:0 0 0 2px rgba(42,214,120,.15)}
    .nav-links{display:flex;gap:18px;align-items:center}

    .gain { color: var(--accent); }
    .loss { color: var(--danger); }

    table th {
      color: var(--muted);
      font-weight: 500;
      border-bottom: 1px solid var(--line);
    }
    table td {
      border-bottom: 1px solid var(--line);
    }
    .table-row-hover:hover {
      background-color: #1a222c;
      cursor: pointer;
    }
    .pagination button {
      background: var(--bg-2);
      border: 1px solid var(--line);
      border-radius: 8px;
      padding: 8px 12px;
    }
    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .blurbar{position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,0.5);color:white;padding:8px 12px;font-size:0.9rem;backdrop-filter:blur(5px);text-align:center;}
    footer{border-top:1px solid var(--line);background:#0b1017;padding:36px 20px 12px;}
    .f-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1.2fr;gap:20px;}
    footer ul{list-style:none;margin:0;padding:0;display:grid;gap:8px}
    footer li a{color:var(--muted)}
    footer li a:hover{color:var(--text)}
    .subtle{font-size:.88rem;color:var(--muted)}

    /* ROI Panel Styles */
    #roi-panel-overlay {
      position: fixed; inset: 0; z-index: 100;
      background: rgba(0,0,0,0.7); backdrop-filter: blur(5px);
      display: flex; align-items: center; justify-content: center;
      opacity: 0; pointer-events: none; transition: opacity .3s ease;
    }
    #roi-panel-overlay.active { opacity: 1; pointer-events: auto; }
    #roi-panel {
      background: #0c1016;
      border: 1px solid var(--line);
      border-radius: var(--radius-lg);
      width: 90%; max-width: 400px;
      color: white;
      font-family: 'Inter', sans-serif;
      transform: scale(.95);
      transition: transform .3s cubic-bezier(.175,.885,.32,1.275);
      background-image: radial-gradient(circle at top right, rgba(42, 214, 120, 0.05), transparent 40%);
    }
    #roi-panel-overlay.active #roi-panel { transform: scale(1); }
    .roi-header { padding: 16px 24px; }
    .roi-body { padding: 24px; text-align: left; }
    .roi-footer { padding: 16px 24px; }

    @media (max-width: 980px) {
        .f-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body class="antialiased">
  
  <header>
    <div class="container nav">
      <a class="brand" href="/" aria-label="NexxTrade home">
        <span class="logo" aria-hidden="true"></span>
        <strong class="text-xl font-bold tracking-tight">NexxTrade</strong>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm font-medium">
        <a href="/#performance" class="text-slate-400 hover:text-white">Performance</a>
        <a href="/#pricing" class="text-slate-400 hover:text-white">Pricing</a>
        <a href="/blog" class="text-slate-400 hover:text-white">Blog</a>
        <a class="btn btn-primary" href="/join">Get Access</a>
      </nav>
    </div>
  </header>

  <main class="container py-8 md:py-12">
    <div class="space-y-12">
      <!-- Page Header -->
      <div class="text-center">
        <a href="/" class="btn btn-ghost mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
          Back to Home
        </a>
        <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">Performance Dashboard</h1>
        <p class="mt-4 max-w-2xl mx-auto text-lg text-muted">Full transparency into our trading signals and results.</p>
      </div>

      <!-- Key Statistics -->
      <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="card p-5">
          <p class="text-sm font-medium text-muted">Win Rate</p>
          <p class="mt-1 text-3xl font-bold tracking-tight" id="stats-win-rate">...%</p>
        </div>
        <div class="card p-5">
          <p class="text-sm font-medium text-muted">Cumulative ROI</p>
          <p class="mt-1 text-3xl font-bold tracking-tight" id="stats-cum-roi">...%</p>
        </div>
        <div class="card p-5">
          <p class="text-sm font-medium text-muted">Total Signals</p>
          <p class="mt-1 text-3xl font-bold tracking-tight" id="stats-total-signals">...</p>
        </div>
        <div class="card p-5">
          <p class="text-sm font-medium text-muted">Most Traded Pair</p>
          <p class="mt-1 text-3xl font-bold tracking-tight" id="stats-most-traded">...</p>
        </div>
      </section>

      <!-- ROI Chart & Signal Breakdown -->
      <section class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div class="lg:col-span-2 card p-5">
            <h3 class="text-lg font-semibold">Cumulative ROI Over Time</h3>
            <div class="mt-4 h-80">
                <canvas id="roiChart"></canvas>
            </div>
        </div>
        <div class="card p-5 flex flex-col justify-center">
          <h3 class="text-lg font-semibold mb-4">Signal Breakdown</h3>
          <div class="space-y-4">
            <div class="flex items-center justify-between">
              <span class="text-muted">Winning Trades</span>
              <span class="font-bold text-lg gain" id="stats-wins">...</span>
            </div>
            <div class="w-full bg-slate-700 rounded-full h-2.5">
              <div class="bg-green-500 h-2.5 rounded-full" id="wins-progress-bar" style="width: 0%"></div>
            </div>

            <div class="flex items-center justify-between">
              <span class="text-muted">Losing Trades</span>
              <span class="font-bold text-lg loss" id="stats-losses">...</span>
            </div>
            <div class="w-full bg-slate-700 rounded-full h-2.5">
              <div class="bg-red-500 h-2.5 rounded-full" id="losses-progress-bar" style="width: 0%"></div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Full Signal History & PNL Proofs -->
      <section class="grid grid-cols-1 lg:grid-cols-5 gap-6">
        <div class="lg:col-span-3 card overflow-hidden">
            <div class="p-5">
              <h2 class="text-xl font-semibold">Full Signal History</h2>
              <p class="mt-1 text-sm text-muted">Click on a row to see details.</p>
            </div>
            <div class="overflow-x-auto">
              <table class="w-full text-sm text-left">
                <thead class="bg-slate-800/50">
                  <tr>
                    <th scope="col" class="px-6 py-3">Date</th>
                    <th scope="col" class="px-6 py-3">Pair</th>
                    <th scope="col" class="px-6 py-3">Direction</th>
                    <th scope="col" class="px-6 py-3">P/L %</th>
                  </tr>
                </thead>
                <tbody id="signals-table">
                  <tr><td colspan="4" class="text-center p-6 text-muted">Loading signals...</td></tr>
                </tbody>
              </table>
            </div>
            <div class="p-4 border-t border-line flex justify-between items-center" id="signals-table-pagination"></div>
        </div>
        <div class="lg:col-span-2 card p-5">
            <h3 class="text-xl font-semibold">PNL Proof Gallery</h3>
            <p class="mt-1 text-sm text-muted">Blurred for privacy.</p>
            <div class="grid grid-cols-2 gap-4 mt-4" id="pnl-gallery">
                <!-- PNL Proofs will be loaded here -->
            </div>
             <div class="mt-4 flex justify-center" id="pnl-gallery-pagination"></div>
        </div>
      </section>

    </div>
  </main>

  <footer>
    <div class="container grid f-grid">
      <div>
        <div class="brand" style="margin-bottom:10px"><span class="logo"></span><strong>NexxTrade</strong></div>
        <p class="subtle">Signals with structure. Community with standards.</p>
      </div>
      <div>
        <h4>Links</h4>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/performance">Performance</a></li>
          <li><a href="/#pricing">Pricing</a></li>
          <li><a href="/blog">Blog</a></li>
        </ul>
      </div>
      <div>
        <h4>Legal</h4>
        <ul>
          <li><a href="#">Terms</a></li>
          <li><a href="#">Privacy</a></li>
          <li><a href="#">Risk Disclaimer</a></li>
        </ul>
      </div>
      <div>
        <h4>Payments & Social</h4>
        <ul>
          <li class="subtle">Fiat • Crypto</li>
          <li><a href="#">Telegram</a></li>
          <li><a href="#">X (Twitter)</a></li>
        </ul>
      </div>
    </div>
    <div class="container" style="border-top:1px solid var(--line);margin-top:18px;padding-top:12px">
      <div class="subtle">© <span id="year"></span> NexxTrade. All rights reserved.</div>
    </div>
  </footer>

  <!-- ROI Panel Modal -->
  <div id="roi-panel-overlay">
    <div id="roi-panel">
        <div id="roi-panel-content">
            <div class="roi-header flex justify-between items-center border-b border-line">
                <div class="brand">
                    <span class="logo"></span>
                    <strong>NexxTrade</strong>
                </div>
                <div class="text-right">
                    <p class="font-semibold">Dr_Crypto1</p>
                    <p class="text-xs text-muted" id="roi-date"></p>
                </div>
            </div>
            <div class="roi-body">
                <div class="grid grid-cols-2 items-center">
                    <div>
                        <h2 class="text-2xl font-bold" id="roi-pair"></h2>
                        <p class="text-lg text-muted" id="roi-direction-leverage"></p>
                        <p class="text-6xl font-extrabold my-4" id="roi-pnl"></p>
                    </div>
                    <div id="roi-chart-container" class="h-32">
                        <!-- Candlestick chart will be rendered here -->
                    </div>
                </div>
                <div class="flex justify-between text-sm mt-4 border-t border-line pt-4">
                    <div>
                        <p class="text-muted">Entry Price</p>
                        <p class="font-semibold text-lg" id="roi-entry"></p>
                    </div>
                    <div>
                        <p class="text-muted">Exit Price</p>
                        <p class="font-semibold text-lg" id="roi-exit"></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="roi-footer border-t border-line flex justify-end">
            <button id="download-roi-btn" class="btn btn-primary">Download</button>
        </div>
    </div>
  </div>


  <script>
    lucide.createIcons();
    
    const API_BASE_URL = '/api';
    document.getElementById('year').textContent = new Date().getFullYear();
    let roiChart = null;

    // --- ROI Panel Logic ---
    const roiOverlay = document.getElementById('roi-panel-overlay');
    const downloadBtn = document.getElementById('download-roi-btn');
    const roiContent = document.getElementById('roi-panel-content');

    function createCandlestickSVG(isLong, isWin) {
        const upColor = 'var(--accent)';
        const downColor = 'var(--danger)';
        const wickColor = '#9ca3af';

        // Base path for the trend line
        let trendPath = "M20,70 Q50,60 80,40 T180,20";
        if (!isLong) { // Invert for shorts
            trendPath = "M20,20 Q50,30 80,50 T180,70";
        }
        
        // Define candles based on long/short and win/loss
        const candles = isLong 
            ? [ // Long positions
                { x: 40, y: isWin ? 60 : 50, h: 20, fill: isWin ? upColor : downColor },
                { x: 80, y: isWin ? 50 : 40, h: 25, fill: isWin ? upColor : downColor },
                { x: 120, y: isWin ? 40 : 30, h: 30, fill: isWin ? upColor : downColor },
                { x: 160, y: isWin ? 30 : 20, h: 35, fill: isWin ? upColor : downColor }
            ]
            : [ // Short positions
                { x: 40, y: isWin ? 20 : 30, h: 20, fill: isWin ? upColor : downColor },
                { x: 80, y: isWin ? 30 : 40, h: 25, fill: isWin ? upColor : downColor },
                { x: 120, y: isWin ? 40 : 50, h: 30, fill: isWin ? upColor : downColor },
                { x: 160, y: isWin ? 50 : 60, h: 35, fill: isWin ? upColor : downColor }
            ];

        const candleElements = candles.map(c => `
            <rect x="${c.x}" y="${c.y - c.h}" width="15" height="${c.h}" fill="${c.fill}" rx="2" />
            <line x1="${c.x + 7.5}" y1="${c.y - c.h - 5}" x2="${c.x + 7.5}" y2="${c.y + 5}" stroke="${wickColor}" stroke-width="2" />
        `).join('');

        return `
            <svg width="100%" height="100%" viewBox="0 0 200 80" preserveAspectRatio="xMidYMid meet">
                <path d="${trendPath}" stroke="${isWin ? upColor : downColor}" fill="none" stroke-width="2" />
                ${candleElements}
            </svg>
        `;
    }

    function showRoiPanel(signal) {
        document.getElementById('roi-date').textContent = `Shared at: ${new Date(signal.date).toLocaleString()}`;
        document.getElementById('roi-pair').textContent = signal.pair;
        const directionText = signal.is_long_position ? 'Long' : 'Short';
        document.getElementById('roi-direction-leverage').textContent = `${directionText} / ${signal.leverage}`;
        
        const pnlEl = document.getElementById('roi-pnl');
        const pnlValue = parseFloat(signal.pnl_percent);
        
        if (pnlValue < 0) {
            pnlEl.textContent = signal.pnl_percent;
        } else {
            pnlEl.textContent = `+${signal.pnl_percent.replace('+', '')}`;
        }

        pnlEl.className = pnlValue >= 0 ? 'text-6xl font-extrabold my-4 gain' : 'text-6xl font-extrabold my-4 loss';
        
        document.getElementById('roi-entry').textContent = `$${signal.entry_price}`;
        document.getElementById('roi-exit').textContent = `$${signal.exit_price}`;

        // Generate and insert the candlestick SVG
        const isWin = pnlValue >= 0;
        const chartContainer = document.getElementById('roi-chart-container');
        chartContainer.innerHTML = createCandlestickSVG(signal.is_long_position, isWin);
        
        roiOverlay.classList.add('active');
    }

    roiOverlay.addEventListener('click', (e) => {
      if (e.target === roiOverlay) {
        roiOverlay.classList.remove('active');
      }
    });
    
    downloadBtn.addEventListener('click', () => {
        downloadBtn.textContent = 'Downloading...';
        htmlToImage.toPng(roiContent, { backgroundColor: '#0c1016' })
            .then(function (dataUrl) {
                const link = document.createElement('a');
                link.download = `NexxTrade_ROI_${document.getElementById('roi-pair').textContent.split(' ')[0]}.png`;
                link.href = dataUrl;
                link.click();
                downloadBtn.textContent = 'Download';
            })
            .catch(function (error) {
                console.error('oops, something went wrong!', error);
                downloadBtn.textContent = 'Error!';
                 setTimeout(() => { downloadBtn.textContent = 'Download'; }, 2000);
            });
    });


    // --- Data Fetching and Rendering ---
    const fetchSignalStats = async () => {
        try {
            const response = await fetch(`${API_BASE_URL}/performances/stats`);
            if (!response.ok) throw new Error('Failed to fetch stats');
            const stats = await response.json();

            document.getElementById('stats-win-rate').textContent = `${stats.winRate}%`;
            document.getElementById('stats-cum-roi').textContent = `${stats.cumulativeROI}%`;
            document.getElementById('stats-total-signals').textContent = stats.totalSignals;
            document.getElementById('stats-most-traded').textContent = stats.mostTradedPair;
            document.getElementById('stats-wins').textContent = stats.wins;
            document.getElementById('stats-losses').textContent = stats.losses;
            
            const winsPercentage = (stats.wins / stats.totalSignals) * 100;
            const lossesPercentage = (stats.losses / stats.totalSignals) * 100;
            document.getElementById('wins-progress-bar').style.width = `${winsPercentage}%`;
            document.getElementById('losses-progress-bar').style.width = `${lossesPercentage}%`;

        } catch (error) {
            console.error('Error fetching signal stats:', error);
            const errorText = 'N/A';
            ['stats-win-rate', 'stats-cum-roi', 'stats-total-signals', 'stats-most-traded', 'stats-wins', 'stats-losses'].forEach(id => {
              if(document.getElementById(id)) document.getElementById(id).textContent = errorText;
            });
        }
    };

    const fetchSignals = async () => {
        try {
            const response = await fetch(`${API_BASE_URL}/performances`);
            if (!response.ok) throw new Error('Failed to fetch signals');
            const signals = await response.json();
            
            renderSignalsTable(signals);
            renderRoiChart(signals);

        } catch (error) {
            console.error('Error fetching signals:', error);
            const signalsTableBody = document.getElementById('signals-table');
            signalsTableBody.innerHTML = `<tr><td colspan="4" class="text-center p-6 text-muted">Failed to load signal history.</td></tr>`;
        }
    };
    
    const fetchPnlProofs = async () => {
      const pnlGallery = document.getElementById('pnl-gallery');
      try {
        const response = await fetch(`${API_BASE_URL}/pnlproofs`);
        const proofs = await response.json();
        renderPnlGallery(proofs);
      } catch (error) {
          console.error('Error fetching PnL proofs:', error);
          pnlGallery.innerHTML = '<div class="text-muted text-center col-span-2">Could not load proofs.</div>';
      }
    };

    function renderPnlGallery(proofs) {
        const pnlGallery = document.getElementById('pnl-gallery');
        pnlGallery.innerHTML = '';
        if (proofs.length === 0) {
            pnlGallery.innerHTML = '<div class="text-muted text-center col-span-2">No proofs available.</div>';
            return;
        }

        proofs.forEach(proof => {
            const panel = document.createElement('div');
            panel.className = 'relative aspect-video rounded-lg overflow-hidden border border-line';
            panel.innerHTML = `
                <img src="${proof.image_url}" alt="${proof.description}" class="w-full h-full object-cover">
                <div class="blurbar">${proof.description}</div>
            `;
            pnlGallery.appendChild(panel);
        });
        setupPagination('pnl-gallery', 4, false);
    }

    function renderSignalsTable(signals) {
        const signalsTableBody = document.getElementById('signals-table');
        signalsTableBody.innerHTML = '';
        if (signals.length === 0) {
            signalsTableBody.innerHTML = `<tr><td colspan="4" class="text-center p-6 text-muted">No signals available.</td></tr>`;
            return;
        }

        signals.forEach(signal => {
            const row = document.createElement('tr');
            row.className = 'table-row-hover';
            
            const pnlValue = parseFloat(signal.pnl_percent);
            const pnlClass = pnlValue >= 0 ? 'gain' : 'loss';
            const directionClass = signal.is_long_position ? 'text-green-400 bg-green-900/50' : 'text-red-400 bg-red-900/50';
            
            row.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap">${new Date(signal.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</td>
                <td class="px-6 py-4 whitespace-nowrap font-medium">${signal.pair}</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${directionClass}">
                      ${signal.is_long_position ? 'LONG' : 'SHORT'}
                    </span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap font-bold ${pnlClass}">${signal.pnl_percent}</td>
            `;
            // Add click listener to show the ROI panel
            row.addEventListener('click', () => showRoiPanel(signal));
            signalsTableBody.appendChild(row);
        });
        
        setupPagination('signals-table', 10, true);
    }

    function renderRoiChart(signals) {
        const sortedSignals = [...signals].reverse();
        let cumulativeROI = 0;
        const labels = sortedSignals.map(s => new Date(s.date).toLocaleDateString('en-CA'));
        const data = sortedSignals.map(s => {
            cumulativeROI += parseFloat(s.pnl_percent.replace('%', ''));
            return cumulativeROI.toFixed(2);
        });

        const ctx = document.getElementById('roiChart').getContext('2d');
        if(roiChart) roiChart.destroy();

        roiChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Cumulative ROI %',
                    data: data,
                    borderColor: 'var(--accent)',
                    backgroundColor: 'rgba(42, 214, 120, 0.1)',
                    fill: true,
                    tension: 0.3,
                    borderWidth: 2,
                    pointRadius: 0,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { ticks: { color: 'var(--muted)', callback: value => value + '%' }, grid: { color: 'rgba(255,255,255,0.05)' } },
                    x: { ticks: { color: 'var(--muted)', maxTicksLimit: 8 }, grid: { display: false } }
                },
                plugins: { legend: { display: false } }
            }
        });
    }

    function setupPagination(containerId, itemsPerPage, isTable) {
        const container = document.getElementById(containerId);
        const items = Array.from(container.children);
        if (items.length <= itemsPerPage) return;

        const totalPages = Math.ceil(items.length / itemsPerPage);
        let currentPage = 1;
        const paginationContainer = document.getElementById(`${containerId}-pagination`);

        function showPage(page) {
            items.forEach((item, index) => {
                const isVisible = (index >= (page - 1) * itemsPerPage && index < page * itemsPerPage);
                item.style.display = isVisible ? '' : 'none';
            });
            renderControls();
        }

        function renderControls() {
            if(!paginationContainer) return;
            paginationContainer.innerHTML = '';
            const prevBtn = document.createElement('button');
            prevBtn.innerHTML = `&larr;`;
            prevBtn.disabled = currentPage === 1;
            prevBtn.onclick = () => { currentPage--; showPage(currentPage); };

            const nextBtn = document.createElement('button');
            nextBtn.innerHTML = `&rarr;`;
            nextBtn.disabled = currentPage === totalPages;
            nextBtn.onclick = () => { currentPage++; showPage(currentPage); };

            const pageInfo = document.createElement('span');
            pageInfo.className = 'text-sm text-muted';
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
            
            paginationContainer.append(prevBtn, pageInfo, nextBtn);
        }
        showPage(1);
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        fetchSignalStats();
        fetchSignals();
        fetchPnlProofs();
    });
  </script>
</body>
</html>

